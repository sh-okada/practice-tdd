# TODO

## ログイン
[https://github.com/sh-okada/practice-tdd/issues/1](https://github.com/sh-okada/practice-tdd/issues/1)

```
要件
メールアドレスとパスワードでログインできる。
パスワードは入力内容をマスクし、任意で表示できるようにする。

ログインに成功した場合は / に遷移し、ログインに失敗した場合はエラーメッセージを表示する。

また、すでにログインしている場合は / にリダイレクトさせること。
```

### 要求分割
- パスワードはマスク状態を切り替えできる
- ログインに成功すると / に遷移する
- ログインに失敗するとエラーメッセージを表示する
- すでにログインしているときは / にリダイレクトする
- ログインはAPIで行う？
- ログインしているかの判定もAPIで行う？


### TODOリスト
- [x] パスワードのマスク状態をボタンで切り替える
  - [x] type="password"のときにアイコンをクリックするとtype="text"
  - [x] type="input"のときにアイコンをクリックするとtype="password"
- [x] ログインボタンをクリックすると入力した値でクリックイベントを実行する
  - [x] 入力したメールアドレスの値でクリックイベントが実行される
  - [x] 入力したパスワードの値でクリックイベントが実行される
- [x] エラーメッセージを表示する
  - [x] エラーのときはエラーメッセージが表示される
  - [x] エラーでないときはエラーメッセージが表示されない
- [x] ログインしている状態によってコンポーネントを切り替える
- [x] データの取得中はローディングを表示する
  - [x] データを取得中のときはローディング画面が表示される
  - [x] データの取得が完了したときはローディング画面が表示されない
- [x] APIでエラーが発生するとエラー画面を表示する
- [x] ログインしているユーザーはログイン画面が表示されない
  - [x] ログインしているときはホーム画面にリダイレクトされる
  - [x] ログインしていないときはホーム画面にリダイレクトされない
- [x] ログインAPIによるログイン
  - [x] ステータス200のときはホーム画面にリダイレクトされる
  - [x] ステータス400のときはエラーメッセージが表示される
  - [x] それ以外のときはエラー画面が表示される
- [x] フォームステータスによるログインボタンの活性・非活性
  - [x] サブミット中でない場合はログインボタンが活性
  - [x] サブミット中の場合はログインボタンが非活性
- [x] メールアドレスのバリデーション
  - [x] 未入力の場合はメッセージを表示
- [x] パスワードのバリデーション
  - [x] 未入力の場合はメッセージを表示

- AuthProvider
  - [ ] API実行中はローディングを表示する
    - [ ] API実行中の場合
      - [ ] ローディングが表示されること
    - [ ] API実行完了の場合
      - [ ] ローディングが表示されないこと
  - [ ] ユーザー情報取得APIの結果でログイン状態を判定する
    - [ ] ステータスコードが200の場合
      - [ ] isAuthedがtrueであること
    - [ ] ステータスコードが401の場合
      - [ ] isAuthedがfalseであること
    - [ ] それ以外の場合
      - [ ] エラーが表示されること

- LoginForm
  - [ ] onBlurでバリデーションを実行する
    - [ ] メールアドレスを入力していない場合
      - [ ] エラーメッセージが表示されること
    - [ ] メールアドレスを入力している場合
      - [ ] エラーメッセージが表示されないこと
    - [ ] パスワードを入力していない場合
      - [ ] エラーメッセージが表示されること
    - [ ] パスワードを入力している場合
      - [ ] エラーメッセージが表示されないこと
  - [ ] ログインボタンでonSubmitを実行する
      - [ ] 入力した値を引数にしてonSubmitが実行されること
  - [ ] onSubmitの多重実行を防止する
      - [ ] onSubmit実行中の場合
        - [ ] ログインボタンが非活性であること
      - [ ] onSubmit実行完了の場合
        - [ ] ログインボタンが活性であること
  - [ ] 

- LoginPage
  - [ ] ログインしていない場合のみアクセスできる
    - [ ] ログインしている場合
      - [ ] / にリダイレクトされること
    - [ ] ログインしていない場合
      - [ ] / にリダイレクトされないこと
  - [ ] ログインAPIでログインする
    - [ ] ステータスコードが200の場合
      - [ ] / リダイレクトされること
    - [ ] ステータスコードが400の場合
      - [ ] エラーメッセージが表示されること
    - [ ] それ以外の場合
      - [ ] エラーが表示されること